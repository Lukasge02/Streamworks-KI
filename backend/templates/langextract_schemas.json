{
  "version": "langextract_PERFECT_v3.0",
  "generated_at": "2025-09-22T12:45:00.000000",
  "description": "üéØ Perfekte LangExtract Schema - Schlanke Parameter f√ºr intelligente Extraktion",
  "design_philosophy": "Fokus auf 6-8 essentielle Parameter pro Job-Type basierend auf echten Export-Streams",

  "job_type_detection": {
    "prompt": "Erkenne den Streamworks Job-Typ aus deutscher User-Eingabe. Fokus auf klare Business-Indikatoren.",
    "examples": [
      {
        "input": "Datentransfer von GT123_Server nach BASF_Agent f√ºr CSV Dateien",
        "output": "FILE_TRANSFER",
        "confidence": 0.95
      },
      {
        "input": "SAP Export aus System PA1_100 mit Report ZTV_CALENDAR t√§glich",
        "output": "SAP",
        "confidence": 0.98
      },
      {
        "input": "Windows Script ausf√ºhren: dir C:\\temp && copy *.log",
        "output": "STANDARD",
        "confidence": 0.92
      }
    ],
    "available_types": ["FILE_TRANSFER", "SAP", "STANDARD"]
  },

  "parameter_extraction": {
    "FILE_TRANSFER": {
      "job_type": "FILE_TRANSFER",
      "display_name": "File Transfer",
      "description": "Datei√ºbertragung zwischen Systemen und Servern",
      "complexity": "medium",

      "extraction_prompt": "Extrahiere File Transfer Parameter aus deutscher User-Nachricht.\n\nFOKUS auf 8 essentielle Parameter:\n1. StreamName (string, REQUIRED) - Eindeutiger Stream-Name\n2. Agent (string, optional) - Agent-Name\n3. MaxStreamRuns (integer, optional) - Parallele Ausf√ºhrungen (1-999)\n4. SchedulingRequiredFlag (boolean, optional) - Zeitgesteuert oder manuell\n5. StartTime (string, optional) - Startzeit HH:MM (nur bei Scheduling)\n6. source_agent (string, REQUIRED) - Quell-Agent/Server\n7. target_agent (string, REQUIRED) - Ziel-Agent/Server\n8. source_path (string, optional) - Quell-Dateipfad\n9. target_path (string, optional) - Ziel-Dateipfad\n\nSuche Keywords: datentransfer, √ºbertragung, server, agent, von, nach, dateien, kopieren, sync\nNummern-Pattern: max X l√§ufe, maximal Y parallel, bis zu Z ausf√ºhrungen\n\nReturn JSON mit extrahierten Parametern und source grounding.",

      "few_shot_examples": [
        {
          "input": "Datentransfer von GT123_Server nach BASF_Agent f√ºr alle CSV Dateien t√§glich um 08:00",
          "output": {
            "StreamName": "GT123_BASF_CSV_Transfer",
            "MaxStreamRuns": 5,
            "SchedulingRequiredFlag": true,
            "StartTime": "08:00",
            "source_agent": "GT123_Server",
            "target_agent": "BASF_Agent",
            "source_path": "*.csv"
          }
        },
        {
          "input": "File Sync zwischen TestAgent1 und BackupServer f√ºr alle wichtigen Dateien",
          "output": {
            "StreamName": "TestAgent_Backup_Sync",
            "MaxStreamRuns": 3,
            "SchedulingRequiredFlag": false,
            "source_agent": "TestAgent1",
            "target_agent": "BackupServer"
          }
        },
        {
          "input": "StrFT_FileTrans_001 soll 10 parallele L√§ufe haben",
          "output": {
            "StreamName": "StrFT_FileTrans_001",
            "MaxStreamRuns": 10,
            "SchedulingRequiredFlag": true
          }
        },
        {
          "input": "streamname ist teststream567",
          "output": {
            "StreamName": "teststream567"
          }
        },
        {
          "input": "source agent ist GT123_Server",
          "output": {
            "source_agent": "GT123_Server"
          }
        },
        {
          "input": "ziel server ist BASF_Agent",
          "output": {
            "target_agent": "BASF_Agent"
          }
        },
        {
          "input": "10 parallele l√§ufe",
          "output": {
            "MaxStreamRuns": 10
          }
        },
        {
          "input": "max 99 l√§ufe",
          "output": {
            "MaxStreamRuns": 99
          }
        },
        {
          "input": "maximal 50 parallel",
          "output": {
            "MaxStreamRuns": 50
          }
        },
        {
          "input": "max 20 l√§ufe t√§glich",
          "output": {
            "MaxStreamRuns": 20
          }
        },
        {
          "input": "bis zu 100 ausf√ºhrungen",
          "output": {
            "MaxStreamRuns": 100
          }
        },
        {
          "input": "startzeit 14:30",
          "output": {
            "StartTime": "14:30"
          }
        },
        {
          "input": "quellpfad ist /data/export/*.csv",
          "output": {
            "source_path": "/data/export/*.csv"
          }
        }
      ],

      "stream_parameters": [
        {
          "name": "StreamName",
          "data_type": "string",
          "required": true,
          "description": "Eindeutiger Stream-Name basierend auf Kontext",
          "examples": ["GT123_BASF_Transfer", "Daily_File_Sync", "StrFT_FileTrans_001"]
        },
        {
          "name": "Agent",
          "data_type": "string",
          "required": false,
          "description": "Agent-Name auf dem der Stream ausgef√ºhrt wird",
          "examples": ["gtlnmiwvm1636", "TestAgent1", "gtasswvk05445", "gtlifswvm0863"]
        },
        {
          "name": "MaxStreamRuns",
          "data_type": "integer",
          "required": false,
          "default_value": 5,
          "description": "Maximale parallele Ausf√ºhrungen (1-999)",
          "min_value": 1,
          "max_value": 999,
          "examples": [5, 10, 20, 50, 99, 100],
          "pattern_examples": [
            "max 99 l√§ufe", "maximal 50 parallel", "bis zu 20 Ausf√ºhrungen",
            "h√∂chstens 100 runs", "max stream runs 25", "parallel l√§ufe 30"
          ]
        },
        {
          "name": "SchedulingRequiredFlag",
          "data_type": "boolean",
          "required": false,
          "default_value": true,
          "description": "Zeitgesteuert (true) oder manuell (false)",
          "examples": [true, false]
        },
        {
          "name": "StartTime",
          "data_type": "string",
          "required": false,
          "description": "Startzeit im Format HH:MM (nur bei SchedulingRequiredFlag=true)",
          "validation_pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$",
          "examples": ["08:00", "14:30", "22:15"]
        }
      ],

      "job_parameters": [
        {
          "name": "source_agent",
          "data_type": "string",
          "required": true,
          "description": "Quell-Agent oder Server",
          "examples": ["GT123_Server", "TestAgent1", "LocalAgent_001"]
        },
        {
          "name": "target_agent",
          "data_type": "string",
          "required": true,
          "description": "Ziel-Agent oder Server",
          "examples": ["BASF_Agent", "BackupServer", "TargetAgent_002"]
        },
        {
          "name": "source_path",
          "data_type": "string",
          "required": false,
          "description": "Quell-Dateipfad oder -pattern",
          "examples": ["/data/export/*.csv", "C:\\Transfer\\Files\\", "*.pdf"]
        },
        {
          "name": "target_path",
          "data_type": "string",
          "required": false,
          "description": "Ziel-Dateipfad oder -verzeichnis",
          "examples": ["/backup/import/", "D:\\Incoming\\", "/var/data/processed/"]
        }
      ],

      "required_parameters": ["StreamName", "source_agent", "target_agent"],

      "detection_keywords": [
        "datentransfer", "√ºbertragung", "transfer", "kopieren", "sync",
        "synchronisation", "backup", "agent", "server", "dateien", "files",
        "von", "nach", "zu", "zwischen"
      ]
    },

    "SAP": {
      "job_type": "SAP",
      "display_name": "SAP Parameter",
      "description": "SAP Report, Programm oder Transaktion",
      "complexity": "medium",

      "extraction_prompt": "Extrahiere SAP System Parameter aus deutscher User-Nachricht.\n\nFOKUS auf 12 essentielle Parameter:\n1. StreamName (string, REQUIRED) - Eindeutiger Stream-Name\n2. Agent (string, optional) - Agent-Name\n3. MaxStreamRuns (integer, optional) - Parallele Ausf√ºhrungen\n4. SchedulingRequiredFlag (boolean, optional) - Zeitgesteuert oder manuell\n5. StartTime (string, optional) - Startzeit HH:MM\n6. system (enum, REQUIRED) - SAP-System\n7. client (string, optional) - SAP-Mandant\n8. program (string, optional) - SAP Programm/Report\n9. user (string, optional) - SAP-User\n10. variant (string, optional) - Report-Variante\n11. job_name (string, optional) - Job-Name\n12. parameters (string, optional) - Zus√§tzliche SAP-Parameter\n13. output_settings (string, optional) - Output/Spool-Konfiguration\n\nSuche Keywords: sap, export, import, system, report, transaktion, mandant, pa1, gt123, jexa4s, execute\n\nReturn JSON mit extrahierten Parametern und source grounding.",

      "few_shot_examples": [
        {
          "input": "SAP Export aus System ZTV Client 300 mit Report EXE_CAL_EXPORT auf Agent gtlnmiwvm1636 t√§glich um 08:00",
          "output": {
            "StreamName": "SAP_ZTV_Calendar_Export",
            "Agent": "gtlnmiwvm1636",
            "MaxStreamRuns": 5,
            "SchedulingRequiredFlag": true,
            "StartTime": "08:00",
            "system": "ZTV",
            "client": "300",
            "program": "EXE_CAL_EXPORT",
            "user": "SAPCOMM"
          }
        },
        {
          "input": "Export aus ZTJ System Client 514 mit EXECUTE Command und User SAPCOMM w√∂chentlich",
          "output": {
            "StreamName": "ZTJ_Execute_Export",
            "MaxStreamRuns": 3,
            "SchedulingRequiredFlag": true,
            "system": "ZTJ",
            "client": "514",
            "program": "EXECUTE",
            "user": "SAPCOMM"
          }
        },
        {
          "input": "SAP Kalender Export von ZTV System mit Variante ZTEST_VAR01 und Output nach c:\\temp",
          "output": {
            "StreamName": "SAP_ZTV_Calendar_Export",
            "system": "ZTV",
            "program": "ZTEST_VARIANT",
            "variant": "ZTEST_VAR01",
            "output_settings": "OUT_DIR:c:\\temp"
          }
        },
        {
          "input": "streamname ist SAP_Daily_Export",
          "output": {
            "StreamName": "SAP_Daily_Export"
          }
        },
        {
          "input": "system ist PA1_100",
          "output": {
            "system": "PA1_100"
          }
        },
        {
          "input": "report ist ZTV_CALENDAR",
          "output": {
            "report": "ZTV_CALENDAR"
          }
        },
        {
          "input": "variante ist EXCEL_DAILY",
          "output": {
            "variant": "EXCEL_DAILY"
          }
        },
        {
          "input": "GT123_PRD system",
          "output": {
            "system": "GT123_PRD"
          }
        },
        {
          "input": "5 parallele l√§ufe",
          "output": {
            "MaxStreamRuns": 5
          }
        }
      ],

      "stream_parameters": [
        {
          "name": "StreamName",
          "data_type": "string",
          "required": true,
          "description": "Eindeutiger Stream-Name basierend auf SAP-Kontext",
          "examples": ["SAP_PA1_Export", "GT123_Daily_Report", "Factory_Calendar_Sync"]
        },
        {
          "name": "MaxStreamRuns",
          "data_type": "integer",
          "required": false,
          "default_value": 5,
          "description": "Maximale parallele Ausf√ºhrungen (1-999)",
          "min_value": 1,
          "max_value": 999,
          "examples": [5, 10, 20, 50, 99, 100]
        },
        {
          "name": "SchedulingRequiredFlag",
          "data_type": "boolean",
          "required": false,
          "default_value": true,
          "description": "Zeitgesteuert (true) oder manuell (false)",
          "examples": [true, false]
        },
        {
          "name": "StartTime",
          "data_type": "string",
          "required": false,
          "description": "Startzeit im Format HH:MM",
          "validation_pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$",
          "examples": ["08:00", "14:30", "22:00"]
        }
      ],

      "job_parameters": [
        {
          "name": "system",
          "data_type": "enum",
          "required": true,
          "description": "SAP System",
          "enum_values": ["PA1", "PT1", "PD1", "GT123", "ZTV", "ZTJ", "HSV"],
          "examples": ["ZTV", "ZTJ", "GT123"]
        },
        {
          "name": "client",
          "data_type": "string",
          "required": false,
          "description": "SAP-Mandant/Client",
          "examples": ["300", "514", "100", "200"]
        },
        {
          "name": "program",
          "data_type": "string",
          "required": false,
          "description": "SAP Programm/Report/Kommando",
          "examples": ["EXE_CAL_EXPORT", "EXECUTE", "BTCSPOOL", "ZTEST_VARIANT"]
        },
        {
          "name": "user",
          "data_type": "string",
          "required": false,
          "description": "SAP-User f√ºr Anmeldung",
          "examples": ["SAPCOMM", "BATCHUSER", "ADMINUSER"]
        },
        {
          "name": "variant",
          "data_type": "string",
          "required": false,
          "description": "Report-Variante",
          "examples": ["EXCEL_DAILY", "ZTEST_VAR01", "STANDARD"]
        },
        {
          "name": "job_name",
          "data_type": "string",
          "required": false,
          "description": "SAP Job-Name f√ºr Monitoring",
          "examples": ["FA_EXPORT_DAILY", "CALENDAR_SYNC", "REPORT_MONTHLY"]
        },
        {
          "name": "parameters",
          "data_type": "string",
          "required": false,
          "description": "Zus√§tzliche SAP-Parameter (Key:Value Format)",
          "examples": ["I_CALENDER_ID_W:09", "OUT_FILE:calendar_01", "TVC_LOW:20130120"]
        },
        {
          "name": "output_settings",
          "data_type": "string",
          "required": false,
          "description": "Output/Spool-Konfiguration",
          "examples": ["-SPOOL", "OUT_DIR:c:\\temp", "PP_PDEST:LOCAL"]
        }
      ],

      "required_parameters": ["StreamName", "system"],

      "detection_keywords": [
        "sap", "system", "report", "export", "import", "mandant", "transaktion",
        "variant", "pa1", "pt1", "gt123", "ztv", "ztj", "hsv", "fabrikkalender", "batch",
        "jexa4s", "execute", "client", "user", "sapcomm", "output", "spool", "agent"
      ]
    },

    "STANDARD": {
      "job_type": "STANDARD",
      "display_name": "Standard Job",
      "description": "Script-Jobs und allgemeine Verarbeitungsprozesse",
      "complexity": "simple",

      "extraction_prompt": "Extrahiere Standard Script Parameter aus deutscher User-Nachricht.\n\nFOKUS auf 6 essentielle Parameter:\n1. StreamName (string, REQUIRED) - Eindeutiger Stream-Name\n2. MaxStreamRuns (integer, optional) - Parallele Ausf√ºhrungen\n3. SchedulingRequiredFlag (boolean, optional) - Zeitgesteuert oder manuell\n4. StartTime (string, optional) - Startzeit HH:MM\n5. MainScript (string, REQUIRED) - Script-Inhalt oder Command\n6. JobType (enum, optional) - Windows/Unix (auto-detect aus Script)\n\nSuche Keywords: script, programm, command, befehl, ausf√ºhren, python, batch, shell, windows, unix\n\nReturn JSON mit extrahierten Parametern und source grounding.",

      "few_shot_examples": [
        {
          "input": "Python-Script ausf√ºhren t√§glich um 08:00: python analyze_data.py --input=/data",
          "output": {
            "StreamName": "Daily_Data_Analysis",
            "MaxStreamRuns": 5,
            "SchedulingRequiredFlag": true,
            "StartTime": "08:00",
            "MainScript": "python analyze_data.py --input=/data",
            "JobType": "Unix"
          }
        },
        {
          "input": "Windows Batch-Verarbeitung: dir C:\\temp && copy *.log D:\\backup",
          "output": {
            "StreamName": "Windows_Log_Backup",
            "MaxStreamRuns": 3,
            "SchedulingRequiredFlag": false,
            "MainScript": "dir C:\\temp && copy *.log D:\\backup",
            "JobType": "Windows"
          }
        },
        {
          "input": "Export-Import-Beispiel-Stream mit env Command",
          "output": {
            "StreamName": "Export-Import-Beispiel-Stream",
            "MaxStreamRuns": 5,
            "SchedulingRequiredFlag": false,
            "MainScript": "env",
            "JobType": "Windows"
          }
        },
        {
          "input": "streamname ist teststream567",
          "output": {
            "StreamName": "teststream567"
          }
        },
        {
          "input": "script ist python main.py",
          "output": {
            "MainScript": "python main.py"
          }
        },
        {
          "input": "command ist dir C:\\temp",
          "output": {
            "MainScript": "dir C:\\temp"
          }
        },
        {
          "input": "windows job",
          "output": {
            "JobType": "Windows"
          }
        },
        {
          "input": "unix script",
          "output": {
            "JobType": "Unix"
          }
        },
        {
          "input": "3 parallele l√§ufe",
          "output": {
            "MaxStreamRuns": 3
          }
        },
        {
          "input": "scheduling t√§glich",
          "output": {
            "SchedulingRequiredFlag": true
          }
        }
      ],

      "stream_parameters": [
        {
          "name": "StreamName",
          "data_type": "string",
          "required": true,
          "description": "Eindeutiger Stream-Name basierend auf Script-Kontext",
          "examples": ["Daily_Data_Analysis", "Backup_Process", "Export-Import-Beispiel-Stream"]
        },
        {
          "name": "Agent",
          "data_type": "string",
          "required": false,
          "description": "Agent-Name auf dem der Script ausgef√ºhrt wird",
          "examples": ["gtlnmiwvm1636", "TestAgent1", "LocalAgent"]
        },
        {
          "name": "MaxStreamRuns",
          "data_type": "integer",
          "required": false,
          "default_value": 5,
          "description": "Maximale parallele Ausf√ºhrungen (1-999)",
          "min_value": 1,
          "max_value": 999,
          "examples": [5, 10, 20, 50, 99, 100]
        },
        {
          "name": "SchedulingRequiredFlag",
          "data_type": "boolean",
          "required": false,
          "default_value": false,
          "description": "Zeitgesteuert (true) oder manuell (false)",
          "examples": [false, true]
        },
        {
          "name": "StartTime",
          "data_type": "string",
          "required": false,
          "description": "Startzeit im Format HH:MM",
          "validation_pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$",
          "examples": ["08:00", "14:30", "22:00"]
        }
      ],

      "job_parameters": [
        {
          "name": "MainScript",
          "data_type": "string",
          "required": true,
          "description": "Script-Inhalt oder Command",
          "examples": ["python analyze_data.py --input=/data", "dir C:\\temp && copy *.log", "env", "REM"]
        },
        {
          "name": "JobType",
          "data_type": "enum",
          "required": false,
          "default_value": "Windows",
          "description": "Script-Ausf√ºhrungstyp (auto-detect aus Script)",
          "enum_values": ["Windows", "Unix"],
          "auto_detect_rules": {
            "Windows": ["dir ", "copy ", "del ", "cmd", "bat", "c:\\", "d:\\", "REM"],
            "Unix": ["ls ", "cp ", "rm ", "sh", "bash", "/usr/", "/bin/", "python"]
          },
          "examples": ["Windows", "Unix"]
        }
      ],

      "required_parameters": ["StreamName", "MainScript"],

      "detection_keywords": [
        "script", "programm", "command", "befehl", "ausf√ºhren", "python",
        "java", "batch", "shell", "exe", "env", "rem", "backup", "process"
      ]
    }
  },

  "extraction_rules": {
    "parameter_focus": "Nur essentielle 6-8 Parameter pro Job-Type extrahieren",
    "no_auto_generation": "Keine auto-generierten Felder wie JobCategory, ShortDescription",
    "german_keywords": "Deutsche Begriffe aus User-Eingaben erkennen und verarbeiten",
    "source_grounding": "Immer character offsets f√ºr extrahierte Parameter bereitstellen",
    "confidence_scoring": "Confidence-Werte f√ºr jede Extraktion berechnen"
  },

  "langextract_integration": {
    "model_id": "gpt-4o",
    "temperature": 0.1,
    "enable_source_grounding": true,
    "fence_output": true,
    "use_schema_constraints": true,
    "example_format": "Google LangExtract ExampleData objects mit Extraction classes"
  }
}