{
  "version": "langextract_PERFECT_v3.0",
  "generated_at": "2025-09-22T12:45:00.000000",
  "description": "üéØ Perfekte LangExtract Schema - Schlanke Parameter f√ºr intelligente Extraktion",
  "design_philosophy": "Fokus auf 6-8 essentielle Parameter pro Job-Type basierend auf echten Export-Streams",

  "job_type_detection": {
    "prompt": "Erkenne den StreamWorks Job-Typ aus deutscher User-Eingabe. Fokus auf klare Business-Indikatoren.",
    "examples": [
      {
        "input": "Datentransfer von GT123_Server nach BASF_Agent f√ºr CSV Dateien",
        "output": "FILE_TRANSFER",
        "confidence": 0.95
      },
      {
        "input": "SAP Export aus System PA1_100 mit Report ZTV_CALENDAR t√§glich",
        "output": "SAP",
        "confidence": 0.98
      },
      {
        "input": "Windows Script ausf√ºhren: dir C:\\temp && copy *.log",
        "output": "STANDARD",
        "confidence": 0.92
      }
    ],
    "available_types": ["FILE_TRANSFER", "SAP", "STANDARD"]
  },

  "parameter_extraction": {
    "FILE_TRANSFER": {
      "job_type": "FILE_TRANSFER",
      "display_name": "File Transfer",
      "description": "Datei√ºbertragung zwischen Systemen und Servern",
      "complexity": "medium",

      "extraction_prompt": "Extrahiere File Transfer Parameter aus deutscher User-Nachricht.\n\nFOKUS auf 7 essentielle Parameter:\n1. StreamName (string, REQUIRED) - Eindeutiger Stream-Name\n2. MaxStreamRuns (integer, optional) - Parallele Ausf√ºhrungen (1,3,5,10,20)\n3. SchedulingRequiredFlag (boolean, optional) - Zeitgesteuert oder manuell\n4. StartTime (string, optional) - Startzeit HH:MM (nur bei Scheduling)\n5. source_agent (string, REQUIRED) - Quell-Agent/Server\n6. target_agent (string, REQUIRED) - Ziel-Agent/Server\n7. source_path (string, optional) - Quell-Dateipfad\n8. target_path (string, optional) - Ziel-Dateipfad\n\nSuche Keywords: datentransfer, √ºbertragung, server, agent, von, nach, dateien, kopieren, sync\n\nReturn JSON mit extrahierten Parametern und source grounding.",

      "few_shot_examples": [
        {
          "input": "Datentransfer von GT123_Server nach BASF_Agent f√ºr alle CSV Dateien t√§glich um 08:00",
          "output": {
            "StreamName": "GT123_BASF_CSV_Transfer",
            "MaxStreamRuns": 5,
            "SchedulingRequiredFlag": true,
            "StartTime": "08:00",
            "source_agent": "GT123_Server",
            "target_agent": "BASF_Agent",
            "source_path": "*.csv"
          }
        },
        {
          "input": "File Sync zwischen TestAgent1 und BackupServer f√ºr alle wichtigen Dateien",
          "output": {
            "StreamName": "TestAgent_Backup_Sync",
            "MaxStreamRuns": 3,
            "SchedulingRequiredFlag": false,
            "source_agent": "TestAgent1",
            "target_agent": "BackupServer"
          }
        },
        {
          "input": "StrFT_FileTrans_001 soll 10 parallele L√§ufe haben",
          "output": {
            "StreamName": "StrFT_FileTrans_001",
            "MaxStreamRuns": 10,
            "SchedulingRequiredFlag": true
          }
        },
        {
          "input": "streamname ist teststream567",
          "output": {
            "StreamName": "teststream567"
          }
        },
        {
          "input": "source agent ist GT123_Server",
          "output": {
            "source_agent": "GT123_Server"
          }
        },
        {
          "input": "ziel server ist BASF_Agent",
          "output": {
            "target_agent": "BASF_Agent"
          }
        },
        {
          "input": "10 parallele l√§ufe",
          "output": {
            "MaxStreamRuns": 10
          }
        },
        {
          "input": "startzeit 14:30",
          "output": {
            "StartTime": "14:30"
          }
        },
        {
          "input": "quellpfad ist /data/export/*.csv",
          "output": {
            "source_path": "/data/export/*.csv"
          }
        }
      ],

      "stream_parameters": [
        {
          "name": "StreamName",
          "data_type": "string",
          "required": true,
          "description": "Eindeutiger Stream-Name basierend auf Kontext",
          "examples": ["GT123_BASF_Transfer", "Daily_File_Sync", "StrFT_FileTrans_001"]
        },
        {
          "name": "MaxStreamRuns",
          "data_type": "integer",
          "required": false,
          "default_value": 5,
          "description": "Maximale parallele Ausf√ºhrungen",
          "enum_values": [1, 3, 5, 10, 20],
          "examples": [5, 10, 3]
        },
        {
          "name": "SchedulingRequiredFlag",
          "data_type": "boolean",
          "required": false,
          "default_value": true,
          "description": "Zeitgesteuert (true) oder manuell (false)",
          "examples": [true, false]
        },
        {
          "name": "StartTime",
          "data_type": "string",
          "required": false,
          "description": "Startzeit im Format HH:MM (nur bei SchedulingRequiredFlag=true)",
          "validation_pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$",
          "examples": ["08:00", "14:30", "22:15"]
        }
      ],

      "job_parameters": [
        {
          "name": "source_agent",
          "data_type": "string",
          "required": true,
          "description": "Quell-Agent oder Server",
          "examples": ["GT123_Server", "TestAgent1", "LocalAgent_001"]
        },
        {
          "name": "target_agent",
          "data_type": "string",
          "required": true,
          "description": "Ziel-Agent oder Server",
          "examples": ["BASF_Agent", "BackupServer", "TargetAgent_002"]
        },
        {
          "name": "source_path",
          "data_type": "string",
          "required": false,
          "description": "Quell-Dateipfad oder -pattern",
          "examples": ["/data/export/*.csv", "C:\\Transfer\\Files\\", "*.pdf"]
        },
        {
          "name": "target_path",
          "data_type": "string",
          "required": false,
          "description": "Ziel-Dateipfad oder -verzeichnis",
          "examples": ["/backup/import/", "D:\\Incoming\\", "/var/data/processed/"]
        }
      ],

      "required_parameters": ["StreamName", "source_agent", "target_agent"],

      "detection_keywords": [
        "datentransfer", "√ºbertragung", "transfer", "kopieren", "sync",
        "synchronisation", "backup", "agent", "server", "dateien", "files",
        "von", "nach", "zu", "zwischen"
      ]
    },

    "SAP": {
      "job_type": "SAP",
      "display_name": "SAP Job",
      "description": "SAP Report, Programm oder Transaktion",
      "complexity": "medium",

      "extraction_prompt": "Extrahiere SAP System Parameter aus deutscher User-Nachricht.\n\nFOKUS auf 7 essentielle Parameter:\n1. StreamName (string, REQUIRED) - Eindeutiger Stream-Name\n2. MaxStreamRuns (integer, optional) - Parallele Ausf√ºhrungen\n3. SchedulingRequiredFlag (boolean, optional) - Zeitgesteuert oder manuell\n4. StartTime (string, optional) - Startzeit HH:MM\n5. system (enum, REQUIRED) - SAP-System mit Mandant\n6. report (string, optional) - Report/Programm-Name\n7. variant (string, optional) - Report-Variante\n\nSuche Keywords: sap, export, import, system, report, transaktion, mandant, pa1, gt123\n\nReturn JSON mit extrahierten Parametern und source grounding.",

      "few_shot_examples": [
        {
          "input": "SAP Export aus System PA1_100 mit Report ZTV_CALENDAR t√§glich um 08:00",
          "output": {
            "StreamName": "SAP_PA1_Calendar_Export",
            "MaxStreamRuns": 5,
            "SchedulingRequiredFlag": true,
            "StartTime": "08:00",
            "system": "PA1_100",
            "report": "ZTV_CALENDAR"
          }
        },
        {
          "input": "Export aus GT123_PRD System Report RSUSR003 w√∂chentlich",
          "output": {
            "StreamName": "GT123_User_Data_Export",
            "MaxStreamRuns": 3,
            "SchedulingRequiredFlag": true,
            "system": "GT123_PRD",
            "report": "RSUSR003"
          }
        },
        {
          "input": "SAP Kalender Export von ZTV System mit Variante EXCEL_DAILY",
          "output": {
            "StreamName": "SAP_ZTV_Calendar_Export",
            "system": "ZTV",
            "report": "CALENDAR_EXPORT",
            "variant": "EXCEL_DAILY"
          }
        },
        {
          "input": "streamname ist SAP_Daily_Export",
          "output": {
            "StreamName": "SAP_Daily_Export"
          }
        },
        {
          "input": "system ist PA1_100",
          "output": {
            "system": "PA1_100"
          }
        },
        {
          "input": "report ist ZTV_CALENDAR",
          "output": {
            "report": "ZTV_CALENDAR"
          }
        },
        {
          "input": "variante ist EXCEL_DAILY",
          "output": {
            "variant": "EXCEL_DAILY"
          }
        },
        {
          "input": "GT123_PRD system",
          "output": {
            "system": "GT123_PRD"
          }
        },
        {
          "input": "5 parallele l√§ufe",
          "output": {
            "MaxStreamRuns": 5
          }
        }
      ],

      "stream_parameters": [
        {
          "name": "StreamName",
          "data_type": "string",
          "required": true,
          "description": "Eindeutiger Stream-Name basierend auf SAP-Kontext",
          "examples": ["SAP_PA1_Export", "GT123_Daily_Report", "Factory_Calendar_Sync"]
        },
        {
          "name": "MaxStreamRuns",
          "data_type": "integer",
          "required": false,
          "default_value": 5,
          "description": "Maximale parallele Ausf√ºhrungen",
          "enum_values": [1, 3, 5, 10],
          "examples": [5, 3, 1]
        },
        {
          "name": "SchedulingRequiredFlag",
          "data_type": "boolean",
          "required": false,
          "default_value": true,
          "description": "Zeitgesteuert (true) oder manuell (false)",
          "examples": [true, false]
        },
        {
          "name": "StartTime",
          "data_type": "string",
          "required": false,
          "description": "Startzeit im Format HH:MM",
          "validation_pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$",
          "examples": ["08:00", "14:30", "22:00"]
        }
      ],

      "job_parameters": [
        {
          "name": "system",
          "data_type": "enum",
          "required": true,
          "description": "SAP System mit Mandant",
          "enum_values": ["PA1_100", "PA1_200", "PT1_100", "PD1_100", "GT123_PRD", "GT123_DEV", "GT123_TST", "ZTV"],
          "examples": ["PA1_100", "GT123_PRD", "ZTV"]
        },
        {
          "name": "report",
          "data_type": "string",
          "required": false,
          "description": "SAP Report oder Programm-Name",
          "examples": ["ZTV_CALENDAR", "RSUSR003", "ZFI_REPORT_DAILY", "FACTORY_CALENDAR"]
        },
        {
          "name": "variant",
          "data_type": "string",
          "required": false,
          "description": "Report-Variante",
          "examples": ["EXCEL_DAILY", "MONTHLY_REPORT", "STANDARD", "WEEKLY"]
        }
      ],

      "required_parameters": ["StreamName", "system"],

      "detection_keywords": [
        "sap", "system", "report", "export", "import", "mandant", "transaktion",
        "variant", "pa1", "pt1", "gt123", "ztv", "fabrikkalender", "batch"
      ]
    },

    "STANDARD": {
      "job_type": "STANDARD",
      "display_name": "Standard Job",
      "description": "Script-Jobs und allgemeine Verarbeitungsprozesse",
      "complexity": "simple",

      "extraction_prompt": "Extrahiere Standard Script Parameter aus deutscher User-Nachricht.\n\nFOKUS auf 6 essentielle Parameter:\n1. StreamName (string, REQUIRED) - Eindeutiger Stream-Name\n2. MaxStreamRuns (integer, optional) - Parallele Ausf√ºhrungen\n3. SchedulingRequiredFlag (boolean, optional) - Zeitgesteuert oder manuell\n4. StartTime (string, optional) - Startzeit HH:MM\n5. MainScript (string, REQUIRED) - Script-Inhalt oder Command\n6. JobType (enum, optional) - Windows/Unix (auto-detect aus Script)\n\nSuche Keywords: script, programm, command, befehl, ausf√ºhren, python, batch, shell, windows, unix\n\nReturn JSON mit extrahierten Parametern und source grounding.",

      "few_shot_examples": [
        {
          "input": "Python-Script ausf√ºhren t√§glich um 08:00: python analyze_data.py --input=/data",
          "output": {
            "StreamName": "Daily_Data_Analysis",
            "MaxStreamRuns": 5,
            "SchedulingRequiredFlag": true,
            "StartTime": "08:00",
            "MainScript": "python analyze_data.py --input=/data",
            "JobType": "Unix"
          }
        },
        {
          "input": "Windows Batch-Verarbeitung: dir C:\\temp && copy *.log D:\\backup",
          "output": {
            "StreamName": "Windows_Log_Backup",
            "MaxStreamRuns": 3,
            "SchedulingRequiredFlag": false,
            "MainScript": "dir C:\\temp && copy *.log D:\\backup",
            "JobType": "Windows"
          }
        },
        {
          "input": "Export-Import-Beispiel-Stream mit env Command",
          "output": {
            "StreamName": "Export-Import-Beispiel-Stream",
            "MaxStreamRuns": 5,
            "SchedulingRequiredFlag": false,
            "MainScript": "env",
            "JobType": "Windows"
          }
        },
        {
          "input": "streamname ist teststream567",
          "output": {
            "StreamName": "teststream567"
          }
        },
        {
          "input": "script ist python main.py",
          "output": {
            "MainScript": "python main.py"
          }
        },
        {
          "input": "command ist dir C:\\temp",
          "output": {
            "MainScript": "dir C:\\temp"
          }
        },
        {
          "input": "windows job",
          "output": {
            "JobType": "Windows"
          }
        },
        {
          "input": "unix script",
          "output": {
            "JobType": "Unix"
          }
        },
        {
          "input": "3 parallele l√§ufe",
          "output": {
            "MaxStreamRuns": 3
          }
        },
        {
          "input": "scheduling t√§glich",
          "output": {
            "SchedulingRequiredFlag": true
          }
        }
      ],

      "stream_parameters": [
        {
          "name": "StreamName",
          "data_type": "string",
          "required": true,
          "description": "Eindeutiger Stream-Name basierend auf Script-Kontext",
          "examples": ["Daily_Data_Analysis", "Backup_Process", "Export-Import-Beispiel-Stream"]
        },
        {
          "name": "MaxStreamRuns",
          "data_type": "integer",
          "required": false,
          "default_value": 5,
          "description": "Maximale parallele Ausf√ºhrungen",
          "enum_values": [1, 3, 5, 10],
          "examples": [5, 3, 1]
        },
        {
          "name": "SchedulingRequiredFlag",
          "data_type": "boolean",
          "required": false,
          "default_value": false,
          "description": "Zeitgesteuert (true) oder manuell (false)",
          "examples": [false, true]
        },
        {
          "name": "StartTime",
          "data_type": "string",
          "required": false,
          "description": "Startzeit im Format HH:MM",
          "validation_pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$",
          "examples": ["08:00", "14:30", "22:00"]
        }
      ],

      "job_parameters": [
        {
          "name": "MainScript",
          "data_type": "string",
          "required": true,
          "description": "Script-Inhalt oder Command",
          "examples": ["python analyze_data.py --input=/data", "dir C:\\temp && copy *.log", "env", "REM"]
        },
        {
          "name": "JobType",
          "data_type": "enum",
          "required": false,
          "default_value": "Windows",
          "description": "Script-Ausf√ºhrungstyp (auto-detect aus Script)",
          "enum_values": ["Windows", "Unix"],
          "auto_detect_rules": {
            "Windows": ["dir ", "copy ", "del ", "cmd", "bat", "c:\\", "d:\\", "REM"],
            "Unix": ["ls ", "cp ", "rm ", "sh", "bash", "/usr/", "/bin/", "python"]
          },
          "examples": ["Windows", "Unix"]
        }
      ],

      "required_parameters": ["StreamName", "MainScript"],

      "detection_keywords": [
        "script", "programm", "command", "befehl", "ausf√ºhren", "python",
        "java", "batch", "shell", "exe", "env", "rem", "backup", "process"
      ]
    }
  },

  "extraction_rules": {
    "parameter_focus": "Nur essentielle 6-8 Parameter pro Job-Type extrahieren",
    "no_auto_generation": "Keine auto-generierten Felder wie JobCategory, ShortDescription",
    "german_keywords": "Deutsche Begriffe aus User-Eingaben erkennen und verarbeiten",
    "source_grounding": "Immer character offsets f√ºr extrahierte Parameter bereitstellen",
    "confidence_scoring": "Confidence-Werte f√ºr jede Extraktion berechnen"
  },

  "langextract_integration": {
    "model_id": "gpt-4o",
    "temperature": 0.1,
    "enable_source_grounding": true,
    "fence_output": true,
    "use_schema_constraints": true,
    "example_format": "Google LangExtract ExampleData objects mit Extraction classes"
  }
}