#!/bin/bash

# Verify Setup - Check that all development dependencies are properly installed
echo "üîç Verifying StreamWorks development setup..."

echo ""
echo "üêç Backend Dependencies:"
cd /Applications/Programmieren/Visual\ Studio/Bachelorarbeit/Streamworks-KI/backend
if command -v python3 &> /dev/null; then
    echo "   ‚úÖ Python 3: $(python3 --version)"
else
    echo "   ‚ùå Python 3 not found"
fi

if python3 -c "import fastapi" 2>/dev/null; then
    echo "   ‚úÖ FastAPI available"
else
    echo "   ‚ùå FastAPI not installed"
fi

if python3 -c "import pytest" 2>/dev/null; then
    echo "   ‚úÖ Pytest available"
else
    echo "   ‚ùå Pytest not installed"
fi

if python3 -m ruff --version &> /dev/null; then
    echo "   ‚úÖ Ruff linter available: $(python3 -m ruff --version)"
else
    echo "   ‚ùå Ruff not installed"
fi

echo ""
echo "‚öõÔ∏è Frontend Dependencies:"
cd /Applications/Programmieren/Visual\ Studio/Bachelorarbeit/Streamworks-KI/frontend
if command -v node &> /dev/null; then
    echo "   ‚úÖ Node.js: $(node --version)"
else
    echo "   ‚ùå Node.js not found"
fi

if command -v npm &> /dev/null; then
    echo "   ‚úÖ npm: $(npm --version)"
else
    echo "   ‚ùå npm not found"
fi

if [ -d "node_modules" ]; then
    echo "   ‚úÖ Node modules installed"
else
    echo "   ‚ùå Node modules not installed (run 'npm install')"
fi

echo ""
echo "üîß Development Tools:"
if [ -f "../.claude/settings.json" ]; then
    echo "   ‚úÖ Claude Code settings configured"
else
    echo "   ‚ùå Claude Code settings missing"
fi

if [ -f "../.claude/hooks/pre-tool-use.js" ]; then
    echo "   ‚úÖ Pre-tool verification hook installed"
else
    echo "   ‚ùå Pre-tool verification hook missing"
fi

echo ""
echo "üìä Port Availability:"
if lsof -i :8000 > /dev/null 2>&1; then
    echo "   ‚ö†Ô∏è Port 8000 (Backend) is in use"
else
    echo "   ‚úÖ Port 8000 (Backend) available"
fi

if lsof -i :3000 > /dev/null 2>&1; then
    echo "   ‚ö†Ô∏è Port 3000 (Frontend) is in use"
else
    echo "   ‚úÖ Port 3000 (Frontend) available"
fi

echo ""
echo "‚úÖ Verification complete!"